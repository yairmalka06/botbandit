[null,{"name":"LevelingSystem","temp":"msg","event-type":"2","actions":[{"message":"1","varName":"msg","info":"3","storage":"1","varName2":"member","name":"Store Message Info"},{"member":"2","varName":"member","dataName":"exp","changeType":"1","value":"1","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"member":"2","varName":"member","dataName":"exp","comparison":"1","value":"${tempVars(\"myLevel\") * 5}","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Member Data"},{"member":"2","varName":"member","dataName":"exp","changeType":"0","value":"0","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","changeType":"1","value":"1","name":"Control Member Data"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"channel":"4","varName":"","message":"מזל טוב${tempVars(\"member\")} עלית ללבל : ${tempVars(\"myLevel\")} עכשיו אתה שודד יותר גדול !","storage":"0","varName2":"","name":"Send Message"}]},{"name":"welcom","temp":"member","event-type":"6","actions":[{"channel":"4","varName":"","message":"${tempVars(\"member\")} הצטרף למשפחת השודדים , מקווים שתהנה כאן!","storage":"0","varName2":"","name":"Send Message"},{"info":"1","find":"viewers","storage":"1","varName":"role","name":"Find Role"},{"member":"2","varName2":"member","role":"3","varName":"role","name":"Add Member Role"}]},{"name":"leave","temp":"member","event-type":"7","actions":[{"channel":"4","varName":"","message":"${tempVars(\"member\")} עזב את המשפחה , אני מקווב שהיתה לזה סיבה טובה...","storage":"0","varName2":"","name":"Send Message"}]},{"name":"error","temp":"error","event-type":"37","actions":[{"channel":"4","varName":"","message":"there is an error ,the error is : ${tempVars(\"error\")}","storage":"0","varName2":"","name":"Send Message"}]},{"name":"bot-join","temp":"","event-type":"4","actions":[{"channel":"4","varName":"","message":"עוד בוט לחבורה ;)","storage":"0","varName2":"","name":"Send Message"}]},{"name":"NewEvent","temp":"","event-type":"34","actions":[{"behavior":"0","interpretation":"0","code":"const { Client } = require('discord.js');\nconst yt = require('ytdl-core');\nconst tokens = require('./tokens.json');\nconst client = new Client();\n\nlet queue = {};\n\nconst commands = {\n\t'play': (msg) => {\n\t\tif (queue[msg.guild.id] === undefined) return msg.channel.sendMessage(`Add some songs to the queue first with ${tokens.prefix}add`);\n\t\tif (!msg.guild.voiceConnection) return commands.join(msg).then(() => commands.play(msg));\n\t\tif (queue[msg.guild.id].playing) return msg.channel.sendMessage('Already Playing');\n\t\tlet dispatcher;\n\t\tqueue[msg.guild.id].playing = true;\n\n\t\tconsole.log(queue);\n\t\t(function play(song) {\n\t\t\tconsole.log(song);\n\t\t\tif (song === undefined) return msg.channel.sendMessage('Queue is empty').then(() => {\n\t\t\t\tqueue[msg.guild.id].playing = false;\n\t\t\t\tmsg.member.voiceChannel.leave();\n\t\t\t});\n\t\t\tmsg.channel.sendMessage(`Playing: **${song.title}** as requested by: **${song.requester}**`);\n\t\t\tdispatcher = msg.guild.voiceConnection.playStream(yt(song.url, { audioonly: true }), { passes : tokens.passes });\n\t\t\tlet collector = msg.channel.createCollector(m => m);\n\t\t\tcollector.on('message', m => {\n\t\t\t\tif (m.content.startsWith(tokens.prefix + 'pause')) {\n\t\t\t\t\tmsg.channel.sendMessage('paused').then(() => {dispatcher.pause();});\n\t\t\t\t} else if (m.content.startsWith(tokens.prefix + 'resume')){\n\t\t\t\t\tmsg.channel.sendMessage('resumed').then(() => {dispatcher.resume();});\n\t\t\t\t} else if (m.content.startsWith(tokens.prefix + 'skip')){\n\t\t\t\t\tmsg.channel.sendMessage('skipped').then(() => {dispatcher.end();});\n\t\t\t\t} else if (m.content.startsWith('volume+')){\n\t\t\t\t\tif (Math.round(dispatcher.volume*50) >= 100) return msg.channel.sendMessage(`Volume: ${Math.round(dispatcher.volume*50)}%`);\n\t\t\t\t\tdispatcher.setVolume(Math.min((dispatcher.volume*50 + (2*(m.content.split('+').length-1)))/50,2));\n\t\t\t\t\tmsg.channel.sendMessage(`Volume: ${Math.round(dispatcher.volume*50)}%`);\n\t\t\t\t} else if (m.content.startsWith('volume-')){\n\t\t\t\t\tif (Math.round(dispatcher.volume*50) <= 0) return msg.channel.sendMessage(`Volume: ${Math.round(dispatcher.volume*50)}%`);\n\t\t\t\t\tdispatcher.setVolume(Math.max((dispatcher.volume*50 - (2*(m.content.split('-').length-1)))/50,0));\n\t\t\t\t\tmsg.channel.sendMessage(`Volume: ${Math.round(dispatcher.volume*50)}%`);\n\t\t\t\t} else if (m.content.startsWith(tokens.prefix + 'time')){\n\t\t\t\t\tmsg.channel.sendMessage(`time: ${Math.floor(dispatcher.time / 60000)}:${Math.floor((dispatcher.time % 60000)/1000) <10 ? '0'+Math.floor((dispatcher.time % 60000)/1000) : Math.floor((dispatcher.time % 60000)/1000)}`);\n\t\t\t\t}\n\t\t\t});\n\t\t\tdispatcher.on('end', () => {\n\t\t\t\tcollector.stop();\n\t\t\t\tplay(queue[msg.guild.id].songs.shift());\n\t\t\t});\n\t\t\tdispatcher.on('error', (err) => {\n\t\t\t\treturn msg.channel.sendMessage('error: ' + err).then(() => {\n\t\t\t\t\tcollector.stop();\n\t\t\t\t\tplay(queue[msg.guild.id].songs.shift());\n\t\t\t\t});\n\t\t\t});\n\t\t})(queue[msg.guild.id].songs.shift());\n\t},\n\t'join': (msg) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst voiceChannel = msg.member.voiceChannel;\n\t\t\tif (!voiceChannel || voiceChannel.type !== 'voice') return msg.reply('I couldn\\'t connect to your voice channel...');\n\t\t\tvoiceChannel.join().then(connection => resolve(connection)).catch(err => reject(err));\n\t\t});\n\t},\n\t'add': (msg) => {\n\t\tlet url = msg.content.split(' ')[1];\n\t\tif (url == '' || url === undefined) return msg.channel.sendMessage(`You must add a YouTube video url, or id after ${tokens.prefix}add`);\n\t\tyt.getInfo(url, (err, info) => {\n\t\t\tif(err) return msg.channel.sendMessage('Invalid YouTube Link: ' + err);\n\t\t\tif (!queue.hasOwnProperty(msg.guild.id)) queue[msg.guild.id] = {}, queue[msg.guild.id].playing = false, queue[msg.guild.id].songs = [];\n\t\t\tqueue[msg.guild.id].songs.push({url: url, title: info.title, requester: msg.author.username});\n\t\t\tmsg.channel.sendMessage(`added **${info.title}** to the queue`);\n\t\t});\n\t},\n\t'queue': (msg) => {\n\t\tif (queue[msg.guild.id] === undefined) return msg.channel.sendMessage(`Add some songs to the queue first with ${tokens.prefix}add`);\n\t\tlet tosend = [];\n\t\tqueue[msg.guild.id].songs.forEach((song, i) => { tosend.push(`${i+1}. ${song.title} - Requested by: ${song.requester}`);});\n\t\tmsg.channel.sendMessage(`__**${msg.guild.name}'s Music Queue:**__ Currently **${tosend.length}** songs queued ${(tosend.length > 15 ? '*[Only next 15 shown]*' : '')}\\n\\`\\`\\`${tosend.slice(0,15).join('\\n')}\\`\\`\\``);\n\t},\n\t'help': (msg) => {\n\t\tlet tosend = ['```xl', tokens.prefix + 'join : \"Join Voice channel of msg sender\"',\ttokens.prefix + 'add : \"Add a valid youtube link to the queue\"', tokens.prefix + 'queue : \"Shows the current queue, up to 15 songs shown.\"', tokens.prefix + 'play : \"Play the music queue if already joined to a voice channel\"', '', 'the following commands only function while the play command is running:'.toUpperCase(), tokens.prefix + 'pause : \"pauses the music\"',\ttokens.prefix + 'resume : \"resumes the music\"', tokens.prefix + 'skip : \"skips the playing song\"', tokens.prefix + 'time : \"Shows the playtime of the song.\"',\t'volume+(+++) : \"increases volume by 2%/+\"',\t'volume-(---) : \"decreases volume by 2%/-\"',\t'```'];\n\t\tmsg.channel.sendMessage(tosend.join('\\n'));\n\t},\n\t'reboot': (msg) => {\n\t\tif (msg.author.id == tokens.adminID) process.exit(); //Requires a node module like Forever to work.\n\t}\n};\n\nclient.on('ready', () => {\n\tconsole.log('ready!');\n});\n\nclient.on('message', msg => {\n\tif (!msg.content.startsWith(tokens.prefix)) return;\n\tif (commands.hasOwnProperty(msg.content.toLowerCase().slice(tokens.prefix.length).split(' ')[0])) commands[msg.content.toLowerCase().slice(tokens.prefix.length).split(' ')[0]](msg);\n});\nclient.login(tokens.d_token);\n","storage":"0","varName":"","name":"Run Script"}]}]
